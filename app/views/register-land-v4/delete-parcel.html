{% extends "layouts/main.html" %}

{% block pageTitle %}
  Delete land parcel – {{ serviceName }} – GOV.UK Prototype Kit
{% endblock %}

{% block content %}
  <div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">
      
      <!-- Retrieve the index from the query parameter using a filter -->
      {% set parcelIndex = data.deleteIndex or query.deleteIndex | int %}
      
      <!-- Find the specific parcel object using the index -->
      {% set parcel = data['parcels'][parcelIndex] %}
      
      <!-- Check if we actually found a parcel -->
      {% if parcel %}

        <form method="post">
          <!-- Hidden input carries the index we need for the deletion route -->
          <input type="hidden" name="index" value="{{ parcelIndex }}">
          
          {{ govukRadios({
            name: "confirmDelete",
            fieldset: {
              legend: {
                html: "<span class='govuk-caption-l'>AR FIELDING</span>Are you sure you want to delete land parcel " + parcel.id + "?",
                isPageHeading: true,
                classes: "govuk-fieldset__legend--l"
              }
            },
            hint: {
              text: "This action cannot be undone"
            },
            items: [
              {
                value: "yes",
                text: "Yes"
              },
              {
                value: "no",
                text: "No, keep this land parcel"
              }
            ]
          }) }}
          
          {{ govukButton({
            text: "Continue"
          }) }}
        </form>

      {% else %}
        <p class="govuk-body govuk-!-margin-top-5">Error: Parcel not found.</p>
        <a href="/register-land-v4/check-parcel-details" class="govuk-link">Return to parcel list</a>
      {% endif %}

    </div>
  </div>
{% endblock %}
